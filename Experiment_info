Plant material
Lotus japonicus seeds of accession Gifu were scarified with sandpaper, sterilized with 1% (v/v) sodium hypochlorite for 10 min and then washed 5 times with sterile water under sterile conditions. The seeds were incubated overnight at 4°C and then transferred to square Petri dishes for germination under a 16 h day (at 21 °C) and 8h (at 19 °C) night cycle. After three days seeds with emerging radicles were transferred to square plates with 1.4% Agar Noble slopes containing 0.25x B&D medium and covered with filter paper. A metal bar with 3-mm holes for roots was inserted at the top of the agar slope. Plant growth plates, each containing 10 seedlings, were inoculated with 500 µL of OD600 = 0.02 bacterial suspensions along the length of the root. 
SynCom Strains 
The following bacterial and rhizobial strains were used for the experiment:
LjRoot221, LjRoot223, LjRoot252, LjRoot259, LjRoot281, LjRoot282, LjRoot296, LjRoot289, LjRoot82, LjRoot25, LjRoot54, LjRoot20, LjRoot21, LjRoot26, LjRoot62, LjRoot67, LjRoot71, LjRoot92, LjRoot149, R7A

Protoplast Isolation and scRNA-seq
For protoplast isolation, whole roots were protoplasted under slight shaking for 3 h at room temperature in 5 mL digestion solution  (10 mM MES (pH 5.7), 1.5 % (w/v) cellulase R-10, 2 % (w/v) macerozyme R-10, 0.4M D-sorbitol, 10 mM CaCl2, 5 % (v/v) viscozyme, 1 % (w/v) BSA). Intact protoplasts were isolated filtering the protoplast-containing digestion solution with a 40 µM strainer into 15 mL falcon tubes and mixing it with 5 mL of 50 % Optiprep solution (50 % (v/v) Optiprep,10 mM MES (pH 5.7), 0.4M D-sorbitol, 5mM KCl, 10 mM CaCl2) and topping the mixed solution carefully first with 2 mL of 12.5 % Optiprep (12.5 % (v/v) Optiprep,10 mM MES (pH 5.7), 0.4M D-sorbitol, 5mM KCl, 10 mM CaCl2) and 250 µL of 0 % Optiprep (10 mM MES (pH 5.7), 0.4M D-sorbitol, 5mM KCl, 10 mM CaCl2). Falcon tubes were centrifuged for 10 min at 250g at 4°C. Living protoplasts were collected at the interphase of 12.5 and 0 % Optiprep solution and counted with a Neubauer counting chamber. For scRNA-seq library preparation, the Chromium Next GEM Single Cell 3' Kit v3.1 was used following the manufacturer's protocol aiming to recover 5000 cells per biological replicate.


